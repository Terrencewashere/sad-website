
<!DOCTYPE html>
<html>
<head>
    <title>S.A.D</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <audio id="bg-music" autoplay loop muted>
        <source src="loader_music.mp3" type="audio/mp3">
    </audio>

    <div id="custom-video-box">
        <iframe id="custom-yt-video" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <script>
        const audio = document.getElementById("bg-music");
        window.addEventListener("click", () => { audio.muted = false; }, { once: true });

        fetch('config.json')
        .then(response => response.json())
        .then(data => {
            const videoID = data.video_url.split("v=")[1]?.split("&")[0] || "";
            const yt = document.getElementById("custom-yt-video");
            yt.src = "https://www.youtube.com/embed/" + videoID + "?enablejsapi=1&rel=0&modestbranding=1&autoplay=0";

            window.onYouTubeIframeAPIReady = function() {
                const player = new YT.Player("custom-yt-video", {
                    events: {
                        'onStateChange': (e) => {
                            if (e.data === YT.PlayerState.PLAYING) {
                                audio.pause();
                            }
                        }
                    }
                });
            };

            const s = document.createElement("script");
            s.src = "https://www.youtube.com/iframe_api";
            document.body.appendChild(s);
        });
    </script>
</body>
</html>
